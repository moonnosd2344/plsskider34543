repeat wait() until game:IsLoaded()
hookfunction(
    require(game:GetService("ReplicatedStorage").Effect.Container.Death),
    function()
    end
)
hookfunction(
    require(game:GetService("ReplicatedStorage").Effect.Container.Respawn),
    function()
    end
)
hookfunction(
    require(game:GetService("ReplicatedStorage"):WaitForChild("GuideModule")).ChangeDisplayedNPC,
    function()
    end
)
require(game.ReplicatedStorage.Util.CameraShaker):Stop()
if (game.PlaceId == 2753915549) then
    World1 = true
elseif (game.PlaceId == 4442272183) then
    World2 = true
elseif (game.PlaceId == 7449423635) then
    World3 = true
end

-- Cáº¥u hÃ¬nh
getgenv().Config = {
    ["Select Join"] = "Pirates", -- hoáº·c Marines
    ["Auto chests will stop if you've"] = {["Fist of Darkness"] = true, ["God's Chalice"] = true}, 
    ["Boost Fps"] = 1, -- tá»‘i Ä‘a 30
    ["AutoMode"] = "Tween", -- "Tween" hoáº·c "Bypass"
    ["Auto Farm Chest"] = true, 
    ["Auto Hop Server"] = true,
    ["Chests Before Hop"] = 50,
    ["Chat"] = "", -- nháº­p tin nháº¯n cáº§n auto chat
    ["Chat Delay"] = 5, -- tÃ­nh báº±ng giÃ¢y
    ["Farm DarkBeard"] = true, 
    ["Anti AFK"] = true
}

-- HÃ m cáº­p nháº­t config
function UpdateConfig(key, value)
    if getgenv().Config[key] ~= nil then
        getgenv().Config[key] = value
        print("Config Updated:", key, "=", value)
    else
        print("Invalid Config Key:", key)
    end
end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local player = Players.LocalPlayer

-- Hiá»‡n nhiá»u dÃ²ng custom chat (chá»‰ mÃ¬nh tháº¥y)
task.spawn(function()
    StarterGui:SetCore("ChatMakeSystemMessage", {
        Text = "ğŸ‰ <b><i>ChÃ o má»«ng Ä‘áº¿n vá»›i Zush Hub do Duck ğŸ¥ sÃ¡ng láº­p</i></b>",
        Color = Color3.fromRGB(255, 128, 0),
        Font = Enum.Font.SourceSansBold,
        FontSize = Enum.FontSize.Size24
    })
    wait(1)
    StarterGui:SetCore("ChatMakeSystemMessage", {
        Text = "ğŸ’ <b>Script free - KhÃ´ng bÃ¡n, khÃ´ng lá»«a Ä‘áº£o</b>",
        Color = Color3.fromRGB(255, 128, 0),
        Font = Enum.Font.SourceSansBold,
        FontSize = Enum.FontSize.Size24
    })
    wait(1)
    StarterGui:SetCore("ChatMakeSystemMessage", {
        Text = "ğŸ¥ <i>Há»— trá»£ táº¡i Discord: Zush Hub</i>",
        Color = Color3.fromRGB(255, 128, 0),
        Font = Enum.Font.SourceSansBold,
        FontSize = Enum.FontSize.Size24
    })
end)

local function selectTeam(team)
    if team == "Pirates" then
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Pirates")
        print("ÄÃ£ tham gia Ä‘á»™i Pirates.")
    elseif team == "Marines" then
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Marines")
        print("ÄÃ£ tham gia Ä‘á»™i Marines.")
    else
        warn("Cáº¥u hÃ¬nh 'Select Join' khÃ´ng há»£p lá»‡! Vui lÃ²ng chá»n 'Pirates' hoáº·c 'Marines'.")
    end
end

local function applySelectTeam()
    if getgenv().Config["Select Join"] then
        selectTeam(getgenv().Config["Select Join"])
    end
end

-- Gá»i chá»©c nÄƒng khi khá»Ÿi Ä‘á»™ng script
applySelectTeam()

if getgenv().Config["Anti AFK"] then
    local VirtualUser = game:service('VirtualUser')
    game:service('Players').LocalPlayer.Idled:connect(function()
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end)
    print("Anti AFK Activated!")
end

local function checkDarkbeardBoss()
    for _, npc in pairs(game:GetService("Workspace").Enemies:GetChildren()) do
        if npc.Name == "Darkbeard [Lv. 1000] [Boss]" and npc:FindFirstChild("Humanoid") and npc.Humanoid.Health > 0 then
            return npc
        end
    end
    return nil
end

-- Táº¥n cÃ´ng Boss Darkbeard
local function attackBoss(boss)
    -- Trang bá»‹ vÅ© khÃ­ Melee
    for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
        if v.ToolTip == "Melee" then
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(v)
            break
        end
    end

    -- Báº­t Haki vÅ© trang
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Buso")

    -- Táº¥n cÃ´ng Boss
    while boss and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 do
        pcall(function()
            -- Bay Ä‘áº¿n Boss
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 0, -5)
            -- ÄÃ¡nh báº±ng skill X
            game:GetService("VirtualInputManager"):SendKeyEvent(true, "X", false, game)
            wait(0.1)
        end)
        wait(0.1)
    end
end

-- Tá»± Ä‘á»™ng kiá»ƒm tra vÃ  Ä‘Ã¡nh Boss Darkbeard
local function checkAndAttackDarkbeard()
    task.spawn(function()
        while getgenv().Config["Farm DarkBeard"] do
            local boss = checkDarkbeardBoss()
            if boss then
                print("TÃ¬m tháº¥y Darkbeard! Báº¯t Ä‘áº§u Ä‘Ã¡nh boss...")
                attackBoss(boss)
                break
            end
            wait(2)
        end
    end)
end

-- Náº¿u cáº¥u hÃ¬nh báº­t Farm Darkbeard, tá»± Ä‘á»™ng tÃ¬m boss vÃ  Ä‘Ã¡nh
if getgenv().Config["Farm DarkBeard"] then
    checkAndAttackDarkbeard()
end

local chestsCollected = 0

-- HÃ m Ä‘á»•i server
local function Hop()
    print("ğŸ”„ Äang Ä‘á»•i server...")
    game:GetService("TeleportService"):Teleport(game.PlaceId)
end

-- HÃ m di chuyá»ƒn báº±ng Tween
local function Tween2(CFgo)
    local tween_s = game:GetService("TweenService")
    local info = TweenInfo.new(
        (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - CFgo.Position).Magnitude / 200,
        Enum.EasingStyle.Linear
    )
    local tween = tween_s:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, info, {CFrame = CFgo})
    tween:Play()
    return tween
end

-- Auto Chat
local function AutoChat(message)
    game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")
end

-- Kiá»ƒm tra váº­t pháº©m cÃ³ náº±m trong danh sÃ¡ch dá»«ng khÃ´ng
local function checkItemFromChest(item)
    return getgenv().Config["Auto chests will stop if you've"][item] or false
end

-- Dá»«ng nháº·t rÆ°Æ¡ng náº¿u nháº­n Ä‘Æ°á»£c váº­t pháº©m Ä‘áº·c biá»‡t
local function stopChestCollecting()
    print("ğŸ›‘ Dá»«ng nháº·t rÆ°Æ¡ng do nháº­n Ä‘Æ°á»£c váº­t pháº©m Ä‘áº·c biá»‡t")
    getgenv().AutoCollectChests = false
end

-- Auto Farm Chest (Tween)
local function ToggleFarmChestTween()
    spawn(function()
        while getgenv().Config["Auto Farm Chest"] and chestsCollected < getgenv().Config["Chests Before Hop"] do
            local player = game:GetService("Players").LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local collectionService = game:GetService("CollectionService")
            local chests = collectionService:GetTagged("_ChestTagged")

            local nearestDistance, nearestChest = math.huge

            for _, chest in pairs(chests) do
                local distance = (chest:GetPivot().Position - character:GetPivot().Position).Magnitude
                if not chest:GetAttribute("IsDisabled") and distance < nearestDistance then
                    nearestDistance, nearestChest = distance, chest
                end
            end

            if nearestChest then
                local chestPosition = nearestChest:GetPivot().Position
                local tween = Tween2(CFrame.new(chestPosition))
                wait(nearestDistance / 200 + 1) -- Chá» di chuyá»ƒn xong

                if nearestChest and nearestChest:FindFirstChild("TouchInterest") then
                    firetouchinterest(player.Character.HumanoidRootPart, nearestChest, 0)
                    wait(0.1)
                    firetouchinterest(player.Character.HumanoidRootPart, nearestChest, 1)

                    chestsCollected = chestsCollected + 1
                    print("ğŸ“¦ ÄÃ£ nháº·t rÆ°Æ¡ng:", chestsCollected, "/", getgenv().Config["Chests Before Hop"])
                    AutoChat("Nháº·t Ä‘Æ°á»£c " .. chestsCollected .. " rÆ°Æ¡ng rá»“i ğŸ¤‘")

                    if chestsCollected >= getgenv().Config["Chests Before Hop"] then
                        AutoChat("âœ… ÄÃ£ nháº·t Ä‘á»§ " .. getgenv().Config["Chests Before Hop"] .. " rÆ°Æ¡ng rá»“i giá» Ä‘á»•i server")
                        if getgenv().Config["Auto Hop Server"] then
                            Hop()
                        else
                            print("âŒ Auto Hop Server táº¯t, khÃ´ng Ä‘á»•i server.")
                        end
                        break
                    end
                end
            end

            wait(1)
        end
    end)
end

-- Auto Farm Chest (Bypass)
local function ToggleFarmChestBP()
    spawn(function()
        while getgenv().Config["Auto Farm Chest"] and chestsCollected < getgenv().Config["Chests Before Hop"] do
            local player = game:GetService("Players").LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local collectionService = game:GetService("CollectionService")
            local chests = collectionService:GetTagged("_ChestTagged")

            local nearestDistance, nearestChest = math.huge

            for _, chest in pairs(chests) do
                local distance = (chest:GetPivot().Position - character:GetPivot().Position).Magnitude
                if not chest:GetAttribute("IsDisabled") and distance < nearestDistance then
                    nearestDistance, nearestChest = distance, chest
                end
            end

            if nearestChest then
                character:PivotTo(CFrame.new(nearestChest:GetPivot().Position))
                wait(0.2)

                if nearestChest and nearestChest:FindFirstChild("TouchInterest") then
                    firetouchinterest(player.Character.HumanoidRootPart, nearestChest, 0)
                    wait(0.1)
                    firetouchinterest(player.Character.HumanoidRootPart, nearestChest, 1)

                    chestsCollected = chestsCollected + 1
                    print("ğŸ“¦ ÄÃ£ nháº·t rÆ°Æ¡ng:", chestsCollected, "/", getgenv().Config["Chests Before Hop"])
                    AutoChat("Nháº·t Ä‘Æ°á»£c " .. chestsCollected .. " rÆ°Æ¡ng rá»“i ğŸ¤‘")

                    if chestsCollected >= getgenv().Config["Chests Before Hop"] then
                        AutoChat("âœ… ÄÃ£ nháº·t Ä‘á»§ " .. getgenv().Config["Chests Before Hop"] .. " rÆ°Æ¡ng, Ä‘á»•i server ngay!")
                        if getgenv().Config["Auto Hop Server"] then
                            Hop()
                        else
                            print("âŒ Auto Hop Server táº¯t, khÃ´ng Ä‘á»•i server ná»¯a Ä‘Ã¢u.")
                        end
                        break
                    end
                end
            end

            wait(1)
        end
    end)
end

-- Chá»n cháº¿ Ä‘á»™ Auto Farm Chest dá»±a trÃªn AutoMode
if getgenv().Config["Auto Farm Chest"] then
    chestsCollected = 0 -- Reset sá»‘ rÆ°Æ¡ng khi báº­t láº¡i

    if getgenv().Config["AutoMode"] == "Tween" then
        ToggleFarmChestTween()
    elseif getgenv().Config["AutoMode"] == "Bypass" then
        ToggleFarmChestBP()
    else
        print("âŒ AutoMode khÃ´ng há»£p lá»‡! Vui lÃ²ng chá»n 'Tween' hoáº·c 'Bypass' giÃºp tao.")
    end
end

local function boostFPS(level)
    level = math.clamp(level, 1, 30) -- Giá»›i háº¡n má»©c tá»« 1 Ä‘áº¿n 30
    print("ğŸ¯ Äang tá»‘i Æ°u FPS á»Ÿ má»©c:", level)

    -- Náº¿u cÃ³ setfpscap, sá»­ dá»¥ng Ä‘á»ƒ giá»›i háº¡n FPS
    if setfpscap then
        setfpscap(level * 2) -- Giá»›i háº¡n FPS, cÃ ng cao thÃ¬ FPS cÃ ng má»Ÿ
    end

    -- Táº¯t hiá»‡u á»©ng & giáº£m táº£i Ä‘á»“ há»a
    local Lighting = game:GetService("Lighting")
    Lighting.GlobalShadows = false
    Lighting.FogEnd = 9e9
    Lighting.Brightness = 0
    
    local Terrain = workspace:FindFirstChildOfClass("Terrain")
    if Terrain then
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 1
    end

    -- áº¨n chi tiáº¿t nhá» Ä‘á»ƒ tá»‘i Æ°u hÆ¡n
    for _, v in ipairs(game:GetDescendants()) do
        if v:IsA("Part") or v:IsA("MeshPart") then
            v.Material = Enum.Material.SmoothPlastic -- Giáº£m táº£i váº­t liá»‡u
            v.Reflectance = 0 -- Giáº£m Ä‘á»™ pháº£n chiáº¿u
        end
    end
end

local function applyBoostFPS()
    if getgenv().Config["Boost Fps"] then
        boostFPS(getgenv().Config["Boost Fps"])
    end
end

-- Gá»i chá»©c nÄƒng khi khá»Ÿi Ä‘á»™ng script
applyBoostFPS()

-- HÃ m bay Ä‘áº¿n vá»‹ trÃ­ triá»‡u há»“i boss khi nháº·t Ä‘Æ°á»£c "Fist of Darkness"
function DiChuyenToiViTriTrieuHoiBoss()
    local viTriTrieuHoi = CFrame.new(3782.1816, 14.8857, -3500.1265) -- Tá»a Ä‘á»™ má»›i
    local player = game.Players.LocalPlayer

    if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = viTriTrieuHoi
        print("ğŸš€ ÄÃ£ di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ triá»‡u há»“i boss Darkbeard")
    else
        warn("âš ï¸ error con máº¹ nÃ³ rá»“i")
    end
end

-- HÃ m kiá»ƒm tra xem Ä‘Ã£ nháº·t Ä‘Æ°á»£c "Fist of Darkness" chÆ°a
function KiemTraFistOfDarkness()
    local player = game.Players.LocalPlayer
    local tuiDo = player.Backpack:GetChildren()

    for _, vatPham in pairs(tuiDo) do
        if vatPham.Name == "Fist of Darkness" then
            print("ğŸ”¥ ÄÃ£ nháº·t Ä‘Æ°á»£c Fist of Darkness yeah ditme nÃ£y giá»")
            DiChuyenToiViTriTrieuHoiBoss()
            return true -- Dá»«ng nháº·t rÆ°Æ¡ng
        end
    end
    return false
end

-- Kiá»ƒm tra Fist of Darkness khi nháº·t rÆ°Æ¡ng
if KiemTraFistOfDarkness() then
    print("ğŸ›‘ Dá»«ng nháº·t rÆ°Æ¡ng vÃ¬ Ä‘Ã£ nháº·t Ä‘Æ°á»£c Fist of Darkness")
    return
end

task.spawn(function()
    while true do
        if getgenv().Config["Chat"] ~= "" then
            -- Gá»­i tin nháº¯n vÃ o chat
            game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(
                getgenv().Config["Chat"], 
                "All"
            )
        end
        -- Äá»£i theo thá»i gian delay Ä‘Ã£ cáº¥u hÃ¬nh
        wait(getgenv().Config["Chat Delay"])
    end
end)
